(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{98990:function(e,s,a){Promise.resolve().then(a.bind(a,93461))},93461:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return p}});var t=a(57437),r=a(2265),c=a(71245),n=a(99376),l=a(12381),i=a(79820),m=a(40279),o=a(75060),u=a(27648),d=a(53459),x=a(55477),h=a(59539);let f="pcg_terms_accepted";function p(){let{login:e,user:s,loading:a,role:p}=(0,c.a)(),j=(0,n.useRouter)(),g=(0,n.useSearchParams)(),[v,N]=(0,r.useState)(g.get("email")||""),[y,S]=(0,r.useState)(""),[w,b]=(0,r.useState)(null),[_,C]=(0,r.useState)(!1),[I,E]=(0,r.useState)(!1);async function Z(s){if(s.preventDefault(),b(null),!I){b("Debes aceptar los T\xe9rminos y Condiciones para continuar.");return}C(!0);try{await e(v,y),localStorage.setItem(f,"true")}catch(e){b(e.message)}finally{C(!1)}}return((0,r.useEffect)(()=>{"true"===localStorage.getItem(f)&&E(!0)},[]),(0,r.useEffect)(()=>{},[s,a,p,j]),a||s)?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen text-muted-foreground",children:[(0,t.jsx)(d.Z,{className:"h-8 w-8 animate-spin mb-4"}),(0,t.jsx)("p",{children:"Cargando sesi\xf3n y verificando permisos..."})]}):(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-muted/40",children:(0,t.jsxs)(i.Zb,{className:"w-full max-w-sm mx-4",children:[(0,t.jsxs)(i.Ol,{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"mx-auto",children:(0,t.jsx)(h.K,{})}),(0,t.jsx)(i.ll,{children:"Acceso a Plataforma"}),(0,t.jsx)(i.SZ,{children:"Ingresa con tu correo y contrase\xf1a de la empresa."})]}),(0,t.jsx)(i.aY,{children:(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"email",children:"Correo electr\xf3nico"}),(0,t.jsx)(m.I,{id:"email",type:"email",value:v,onChange:e=>N(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{htmlFor:"password",children:"Contrase\xf1a"}),(0,t.jsx)(m.I,{id:"password",type:"password",value:y,onChange:e=>S(e.target.value),required:!0})]}),(0,t.jsx)(x.Z,{acceptedTerms:I,onAcceptedTermsChange:e=>{E(e),e?localStorage.setItem(f,"true"):localStorage.removeItem(f)}}),w&&(0,t.jsx)("p",{className:"text-sm font-medium text-destructive text-center pt-2",children:w}),(0,t.jsxs)(l.z,{type:"submit",className:"w-full",disabled:_||!I,children:[_&&(0,t.jsx)(d.Z,{className:"mr-2 h-4 w-4 animate-spin"}),_?"Iniciando...":"Iniciar Sesi\xf3n"]})]})}),(0,t.jsx)(i.aY,{className:"text-center text-sm",children:(0,t.jsx)(u.default,{href:"/",className:"text-muted-foreground hover:text-primary",children:"‚Üê Volver a la selecci\xf3n de acceso"})})]})})}}},function(e){e.O(0,[4358,9990,6137,1211,2972,9759,2991,7127,2971,2117,1744],function(){return e(e.s=98990)}),_N_E=e.O()}]);