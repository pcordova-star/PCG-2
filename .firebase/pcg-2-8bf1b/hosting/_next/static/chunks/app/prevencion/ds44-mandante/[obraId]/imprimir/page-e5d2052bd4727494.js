(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2211],{34203:function(e,s,a){Promise.resolve().then(a.bind(a,41866))},41866:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return b}});var r=a(57437),n=a(29),i=a.n(n),d=a(2265),o=a(5978),t=a(99764),c=a(12381),l=a(68245),x=a(27648),f=a(75060);function b(e){let{params:s}=e,[a,n]=(0,d.useState)(null),[b,m]=(0,d.useState)(null),[j,u]=(0,d.useState)(!0),[h,p]=(0,d.useState)(null),{obraId:g}=(0,d.use)(s);return((0,d.useEffect)(()=>{if(!g){p("No se proporcion\xf3 un ID de obra."),u(!1);return}(async()=>{u(!0),p(null);try{let e=(0,o.JU)(t.N$,"obras",g,"ds44MandanteObra","ficha"),s=await (0,o.QT)(e),a=(0,o.JU)(t.N$,"obras",g),r=await (0,o.QT)(a);if(!r.exists())throw Error("No se encontr\xf3 la obra con el ID proporcionado.");m({id:r.id,...r.data()}),s.exists()?n({obraId:g,...s.data()}):n({obraId:g,representanteLegal:"",responsableCoordinacionNombre:"",responsableCoordinacionCargo:"",responsableCoordinacionContacto:"",mutualidad:"",fechaInicioObra:"",fechaTerminoEstimado:"",existeReglamentoEspecial:!1,existePlanUnicoSeguridad:!1,existeProgramaCoordinacion:!1,frecuenciaReunionesCoordinacion:"",mecanismosComunicacion:"",estadoGlobal:"EN_IMPLEMENTACION",observacionesGenerales:"",fechaUltimaRevision:new Date().toISOString().slice(0,10),revisadoPor:""})}catch(e){console.error("Error fetching DS44 record:",e),p(e instanceof Error?e.message:"Ocurri\xf3 un error al cargar la ficha DS44.")}finally{u(!1)}})()},[g]),j)?(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando ficha DS44..."}):h?(0,r.jsx)("div",{className:"p-8 text-center text-destructive",children:h}):a&&b?(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 bg-background min-h-screen p-4 sm:p-8 print:p-0",children:[(0,r.jsx)(i(),{id:"8349f650b50ed3a4",children:"@media print{body{background-color:#fff;color:#000}.print-hidden{display:none!important}.printable-area{-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important;border:none!important;padding:0!important}}"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex justify-between items-center mb-6 print-hidden",children:[(0,r.jsx)("h1",{className:"jsx-8349f650b50ed3a4 text-xl font-bold",children:"Vista Previa de Ficha DS44 Mandante / Obra"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex gap-2",children:[(0,r.jsx)(c.z,{asChild:!0,variant:"outline",children:(0,r.jsx)(x.default,{href:"/prevencion/ds44-mandante",children:"Volver al formulario"})}),(0,r.jsx)(c.z,{onClick:()=>window.print(),children:"Imprimir / Guardar PDF"})]})]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 printable-area p-8 border rounded-lg bg-card text-card-foreground shadow-md text-sm",children:[(0,r.jsxs)("header",{className:"jsx-8349f650b50ed3a4 mb-8",children:[(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex justify-between items-start border-b pb-4",children:[(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("h2",{className:"jsx-8349f650b50ed3a4 text-2xl font-bold text-primary",children:"PCG 2.0"}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4 text-sm text-muted-foreground",children:b.mandanteRazonSocial||"Constructora Principal"})]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 text-right text-sm",children:[(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4 font-semibold",children:"Obra:"})," ",b.nombreFaena]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4 font-semibold",children:"\xdaltima Revisi\xf3n:"})," ",new Date(a.fechaUltimaRevision+"T00:00:00").toLocaleDateString("es-CL")]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4 font-semibold",children:"ID Obra:"})," ",(0,r.jsx)("span",{className:"jsx-8349f650b50ed3a4 font-mono text-xs",children:b.id})]})]})]}),(0,r.jsx)("h3",{className:"jsx-8349f650b50ed3a4 text-center text-xl font-bold mt-4",children:"FICHA DE CUMPLIMIENTO DS44 â€“ MANDANTE / OBRA"})]}),(0,r.jsxs)("main",{className:"jsx-8349f650b50ed3a4 space-y-6",children:[(0,r.jsxs)("section",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("h4",{className:"jsx-8349f650b50ed3a4 font-bold text-base mb-2 border-b pb-1",children:"A. Datos del Mandante y de la Obra"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 grid grid-cols-2 gap-x-8 gap-y-2",children:[(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Raz\xf3n Social Mandante:"})," ",b.mandanteRazonSocial]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"RUT Mandante:"})," ",b.mandanteRut]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Representante Legal:"})," ",a.representanteLegal]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Mutualidad:"})," ",a.mutualidad]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Fecha de Inicio:"})," ",a.fechaInicioObra?new Date(a.fechaInicioObra+"T00:00:00").toLocaleDateString("es-CL"):"N/A"]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Fecha de T\xe9rmino Estimado:"})," ",a.fechaTerminoEstimado?new Date(a.fechaTerminoEstimado+"T00:00:00").toLocaleDateString("es-CL"):"N/A"]})]})]}),(0,r.jsxs)("section",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("h4",{className:"jsx-8349f650b50ed3a4 font-bold text-base mb-2 border-b pb-1",children:"B. Responsable de Coordinaci\xf3n DS44"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 grid grid-cols-2 gap-x-8 gap-y-2",children:[(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Nombre:"})," ",a.responsableCoordinacionNombre]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Cargo:"})," ",a.responsableCoordinacionCargo]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4 col-span-2",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Contacto:"})," ",a.responsableCoordinacionContacto]})]})]}),(0,r.jsxs)("section",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("h4",{className:"jsx-8349f650b50ed3a4 font-bold text-base mb-2 border-b pb-1",children:"C. Documentos y Coordinaci\xf3n DS44"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 grid grid-cols-2 gap-x-8 gap-y-2",children:[(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex items-center gap-2",children:[(0,r.jsx)(l.X,{id:"c1",checked:a.existeReglamentoEspecial,disabled:!0}),(0,r.jsx)(f._,{htmlFor:"c1",children:"Existe Reglamento Especial de Faena"})]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex items-center gap-2",children:[(0,r.jsx)(l.X,{id:"c2",checked:a.existePlanUnicoSeguridad,disabled:!0}),(0,r.jsx)(f._,{htmlFor:"c2",children:"Existe Plan de Seguridad Coordinado"})]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex items-center gap-2",children:[(0,r.jsx)(l.X,{id:"c3",checked:a.existeProgramaCoordinacion,disabled:!0}),(0,r.jsx)(f._,{htmlFor:"c3",children:"Existe Programa de Coordinaci\xf3n"})]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Frecuencia Reuniones:"})," ",a.frecuenciaReunionesCoordinacion]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4 col-span-2",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Mecanismos de Comunicaci\xf3n:"})," ",a.mecanismosComunicacion]})]})]}),(0,r.jsxs)("section",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("h4",{className:"jsx-8349f650b50ed3a4 font-bold text-base mb-2 border-b pb-1",children:"D. Estado Global y Observaciones"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 grid grid-cols-2 gap-x-8 gap-y-2",children:[(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Estado Global:"})," ",(0,r.jsx)("span",{className:"jsx-8349f650b50ed3a4 font-semibold",children:(e=>{switch(e){case"EN_IMPLEMENTACION":return"En implementaci\xf3n";case"CUMPLE":return"Cumple";case"CON_OBSERVACIONES":return"Cumple con observaciones";case"CRITICO":return"Cr\xedtico";default:return"No definido"}})(a.estadoGlobal)})]}),(0,r.jsxs)("p",{className:"jsx-8349f650b50ed3a4",children:[(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Revisado Por:"})," ",a.revisadoPor]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 col-span-2 space-y-1",children:[(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4",children:(0,r.jsx)("strong",{className:"jsx-8349f650b50ed3a4",children:"Observaciones Generales:"})}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4 text-muted-foreground pl-4 border-l-2 ml-2 min-h-[40px]",children:a.observacionesGenerales||"Sin observaciones."})]})]})]})]}),(0,r.jsxs)("footer",{className:"jsx-8349f650b50ed3a4 mt-16 pt-8 border-t text-xs",children:[(0,r.jsx)("h4",{className:"jsx-8349f650b50ed3a4 font-semibold text-center mb-8",children:"Firmas de Conformidad"}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 grid grid-cols-2 gap-12",children:[(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex flex-col items-center",children:[(0,r.jsx)("div",{className:"jsx-8349f650b50ed3a4 w-full border-b mt-12 mb-2"}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4 font-semibold",children:"Prevencionista de Riesgos (Constructora)"}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4",children:"Nombre y Firma"})]}),(0,r.jsxs)("div",{className:"jsx-8349f650b50ed3a4 flex flex-col items-center",children:[(0,r.jsx)("div",{className:"jsx-8349f650b50ed3a4 w-full border-b mt-12 mb-2"}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4 font-semibold",children:"Jefe de Obra (Constructora)"}),(0,r.jsx)("p",{className:"jsx-8349f650b50ed3a4",children:"Nombre y Firma"})]})]})]})]})]})]}):(0,r.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No se encontr\xf3 el registro."})}},12381:function(e,s,a){"use strict";a.d(s,{d:function(){return t},z:function(){return c}});var r=a(57437),n=a(2265),i=a(37053),d=a(90535),o=a(93448);let t=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,s)=>{let{className:a,variant:n,size:d,asChild:c=!1,...l}=e,x=c?i.g7:"button";return(0,r.jsx)(x,{className:(0,o.cn)(t({variant:n,size:d,className:a})),ref:s,...l})});c.displayName="Button"},68245:function(e,s,a){"use strict";a.d(s,{X:function(){return t}});var r=a(57437),n=a(2265),i=a(9270),d=a(59559),o=a(93448);let t=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,r.jsx)(i.fC,{ref:s,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...n,children:(0,r.jsx)(i.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(d.Z,{className:"h-4 w-4"})})})});t.displayName=i.fC.displayName},75060:function(e,s,a){"use strict";a.d(s,{_:function(){return c}});var r=a(57437),n=a(2265),i=a(370),d=a(90535),o=a(93448);let t=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,s)=>{let{className:a,...n}=e;return(0,r.jsx)(i.f,{ref:s,className:(0,o.cn)(t(),a),...n})});c.displayName=i.f.displayName},99764:function(e,s,a){"use strict";let r,n,i,d,o;a.d(s,{IG:function(){return d},N$:function(){return i},lX:function(){return n},x2:function(){return o}});var t=a(738),c=a(43301),l=a(5978),x=a(60062),f=a(13491);let b={apiKey:"AIzaSyBfMp_dH9XhFSXEeMxY-Cdy8MDRIgWrxR0",authDomain:"pcg-2-8bf1b.firebaseapp.com",projectId:"pcg-2-8bf1b",storageBucket:"pcg-2-8bf1b.appspot.com",messagingSenderId:"1073834543546",appId:"1:1073834543546:web:2f85a4a8350280f8589737"};for(let e in b)if(Object.prototype.hasOwnProperty.call(b,e)&&!b[e]){let s=e.replace(/([A-Z])/g,"_$1").toUpperCase(),a="NEXT_PUBLIC_FIREBASE_".concat(s);throw Error("Error de configuraci\xf3n del cliente: La variable de entorno Firebase '".concat(a,"' no est\xe1 definida o est\xe1 vac\xeda. ")+"Aseg\xfarate de que est\xe9 configurada en tu archivo .env.local o en las variables de entorno de producci\xf3n.")}r=(0,t.C6)().length?(0,t.Mq)():(0,t.ZF)(b),n=(0,c.v0)(r),i=(0,l.ad)(r),d=(0,x.cF)(r),o=(0,f.$C)(r,"us-central1")},93448:function(e,s,a){"use strict";a.d(s,{cn:function(){return i}});var r=a(61994),n=a(53335);function i(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return(0,n.m6)((0,r.W)(s))}}},function(e){e.O(0,[4358,9990,6137,1211,2972,9759,6796,2971,2117,1744],function(){return e(e.s=34203)}),_N_E=e.O()}]);