(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{24275:function(e,s,r){Promise.resolve().then(r.bind(r,89314))},89314:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return f}});var n=r(57437),t=r(29),a=r.n(t),c=r(2265),i=r(5978),o=r(99764),l=r(12381),d=r(33804);function f(e){let{params:s}=e,[r,t]=(0,c.useState)(null),[f,x]=(0,c.useState)(!0),[m,b]=(0,c.useState)(null),{id:u}=(0,c.use)(s);if((0,c.useEffect)(()=>{if(!u){b("No se proporcion\xf3 un ID de plan de acci\xf3n."),x(!1);return}(async()=>{x(!0),b(null);try{let e=(0,i.JU)(o.N$,"planesAccion",u),s=await (0,i.QT)(e);s.exists()?t({id:s.id,...s.data()}):b("No se encontr\xf3 el plan de acci\xf3n con el ID proporcionado.")}catch(e){console.error("Error fetching plan de acci\xf3n:",e),b("Ocurri\xf3 un error al cargar el plan de acci\xf3n desde Firestore.")}finally{x(!1)}})()},[u]),f)return(0,n.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Cargando Plan de Acci\xf3n..."});if(m)return(0,n.jsx)("div",{className:"p-8 text-center text-destructive",children:m});if(!r)return(0,n.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"No se encontr\xf3 el registro."});let j=r.fechaCreacion?new Date(r.fechaCreacion+"T00:00:00").toLocaleDateString("es-CL"):"N/A";return(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 bg-background min-h-screen p-4 sm:p-8",children:[(0,n.jsx)(a(),{id:"66c9e221159b2f17",children:"@media print{body{background-color:#fff;color:#000}.print-hidden{display:none!important}.printable-area{-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important;border:none!important;padding:0!important}}"}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 max-w-4xl mx-auto",children:[(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 flex justify-between items-center mb-6 print-hidden",children:[(0,n.jsx)("h1",{className:"jsx-66c9e221159b2f17 text-xl font-bold",children:"Vista Previa de Plan de Acci\xf3n"}),(0,n.jsx)(l.z,{onClick:()=>window.print(),children:"Imprimir / Guardar como PDF"})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 printable-area p-8 border rounded-lg bg-card text-card-foreground shadow-md",children:[(0,n.jsxs)("header",{className:"jsx-66c9e221159b2f17 mb-8",children:[(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 flex justify-between items-start border-b pb-4",children:[(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("h2",{className:"jsx-66c9e221159b2f17 text-2xl font-bold text-primary",children:"PCG 2.0"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 text-sm text-muted-foreground",children:"Constructora XYZ"})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 text-right text-sm",children:[(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17 font-semibold",children:"Obra:"})," ",r.obraNombre||"No especificada"]}),(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17 font-semibold",children:"Fecha:"})," ",j]}),(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17 font-semibold",children:"ID Plan:"})," ",(0,n.jsx)("span",{className:"jsx-66c9e221159b2f17 font-mono text-xs",children:r.id})]})]})]}),(0,n.jsx)("h3",{className:"jsx-66c9e221159b2f17 text-center text-xl font-bold mt-4",children:"PLAN DE ACCI\xd3N Y SEGUIMIENTO"})]}),(0,n.jsxs)("main",{className:"jsx-66c9e221159b2f17 space-y-6 text-sm",children:[(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("h4",{className:"jsx-66c9e221159b2f17 font-semibold text-base mb-2",children:"Informaci\xf3n General"}),(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17",children:"Origen de la Acci\xf3n:"})," ",r.origen]}),(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17",children:"Referencia (ID Origen):"})," ",r.referencia||"N/A"]}),(0,n.jsxs)("p",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17",children:"Creado por:"})," ",r.creadoPor||"No especificado"]})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("h4",{className:"jsx-66c9e221159b2f17 font-semibold text-base mb-2",children:"Acciones a Implementar"}),(0,n.jsxs)(d.iA,{children:[(0,n.jsx)(d.xD,{children:(0,n.jsxs)(d.SC,{children:[(0,n.jsx)(d.ss,{children:"Acci\xf3n Correctiva / Preventiva"}),(0,n.jsx)(d.ss,{children:"Responsable"}),(0,n.jsx)(d.ss,{children:"Plazo"}),(0,n.jsx)(d.ss,{children:"Estado"})]})}),(0,n.jsx)(d.RM,{children:(0,n.jsxs)(d.SC,{children:[(0,n.jsx)(d.pj,{children:r.descripcionAccion}),(0,n.jsx)(d.pj,{children:r.responsable}),(0,n.jsx)(d.pj,{children:r.plazo?new Date(r.plazo+"T00:00:00").toLocaleDateString("es-CL"):"N/A"}),(0,n.jsx)(d.pj,{children:r.estado})]})})]})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17",children:[(0,n.jsx)("h4",{className:"jsx-66c9e221159b2f17 font-semibold text-base mb-2",children:"Seguimiento y Cierre"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17",children:(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17",children:"Comentarios de Avance:"})}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 text-muted-foreground pl-4 border-l-2 ml-2 min-h-[40px]",children:r.avance||"Sin comentarios."}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 mt-2",children:(0,n.jsx)("strong",{className:"jsx-66c9e221159b2f17",children:"Observaciones de Cierre:"})}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 text-muted-foreground pl-4 border-l-2 ml-2 min-h-[40px]",children:r.observacionesCierre||"Sin comentarios."})]})]}),(0,n.jsxs)("footer",{className:"jsx-66c9e221159b2f17 mt-16 pt-8 border-t text-xs",children:[(0,n.jsx)("h4",{className:"jsx-66c9e221159b2f17 font-semibold text-center mb-8",children:"Firmas de Conformidad y Revisi\xf3n"}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 grid grid-cols-3 gap-12",children:[(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"jsx-66c9e221159b2f17 w-full border-b mt-12 mb-2"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 font-semibold",children:"Prevencionista de Riesgos"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17",children:"Nombre y Firma"})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"jsx-66c9e221159b2f17 w-full border-b mt-12 mb-2"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 font-semibold",children:"Jefe de Obra / Supervisor"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17",children:"Nombre y Firma"})]}),(0,n.jsxs)("div",{className:"jsx-66c9e221159b2f17 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"jsx-66c9e221159b2f17 w-full border-b mt-12 mb-2"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17 font-semibold",children:"Gerente de Proyecto"}),(0,n.jsx)("p",{className:"jsx-66c9e221159b2f17",children:"Nombre y Firma"})]})]})]})]})]})]})}},12381:function(e,s,r){"use strict";r.d(s,{d:function(){return o},z:function(){return l}});var n=r(57437),t=r(2265),a=r(37053),c=r(90535),i=r(93448);let o=(0,c.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=t.forwardRef((e,s)=>{let{className:r,variant:t,size:c,asChild:l=!1,...d}=e,f=l?a.g7:"button";return(0,n.jsx)(f,{className:(0,i.cn)(o({variant:t,size:c,className:r})),ref:s,...d})});l.displayName="Button"},33804:function(e,s,r){"use strict";r.d(s,{RM:function(){return o},SC:function(){return l},iA:function(){return c},pj:function(){return f},ss:function(){return d},xD:function(){return i}});var n=r(57437),t=r(2265),a=r(93448);let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("div",{className:"relative w-full overflow-auto",children:(0,n.jsx)("table",{ref:s,className:(0,a.cn)("w-full caption-bottom text-sm",r),...t})})});c.displayName="Table";let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("thead",{ref:s,className:(0,a.cn)("[&_tr]:border-b",r),...t})});i.displayName="TableHeader";let o=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("tbody",{ref:s,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...t})});o.displayName="TableBody",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("tfoot",{ref:s,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...t})}).displayName="TableFooter";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("tr",{ref:s,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t})});l.displayName="TableRow";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("th",{ref:s,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...t})});d.displayName="TableHead";let f=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("td",{ref:s,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...t})});f.displayName="TableCell",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,n.jsx)("caption",{ref:s,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...t})}).displayName="TableCaption"},99764:function(e,s,r){"use strict";let n,t,a,c,i;r.d(s,{IG:function(){return c},N$:function(){return a},lX:function(){return t},x2:function(){return i}});var o=r(738),l=r(43301),d=r(5978),f=r(60062),x=r(13491);let m={apiKey:"AIzaSyBfMp_dH9XhFSXEeMxY-Cdy8MDRIgWrxR0",authDomain:"pcg-2-8bf1b.firebaseapp.com",projectId:"pcg-2-8bf1b",storageBucket:"pcg-2-8bf1b.appspot.com",messagingSenderId:"1073834543546",appId:"1:1073834543546:web:2f85a4a8350280f8589737"};for(let e in m)if(Object.prototype.hasOwnProperty.call(m,e)&&!m[e]){let s=e.replace(/([A-Z])/g,"_$1").toUpperCase(),r="NEXT_PUBLIC_FIREBASE_".concat(s);throw Error("Error de configuraci\xf3n del cliente: La variable de entorno Firebase '".concat(r,"' no est\xe1 definida o est\xe1 vac\xeda. ")+"Aseg\xfarate de que est\xe9 configurada en tu archivo .env.local o en las variables de entorno de producci\xf3n.")}n=(0,o.C6)().length?(0,o.Mq)():(0,o.ZF)(m),t=(0,l.v0)(n),a=(0,d.ad)(n),c=(0,f.cF)(n),i=(0,x.$C)(n,"us-central1")},93448:function(e,s,r){"use strict";r.d(s,{cn:function(){return a}});var n=r(61994),t=r(53335);function a(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.m6)((0,n.W)(s))}}},function(e){e.O(0,[4358,9990,6137,1211,7668,2971,2117,1744],function(){return e(e.s=24275)}),_N_E=e.O()}]);