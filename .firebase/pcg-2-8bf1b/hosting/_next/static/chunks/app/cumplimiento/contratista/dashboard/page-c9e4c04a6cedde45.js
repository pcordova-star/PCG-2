(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7062],{49092:function(e,r,t){Promise.resolve().then(t.bind(t,52886))},27648:function(e,r,t){"use strict";t.d(r,{default:function(){return o.a}});var n=t(72972),o=t.n(n)},99376:function(e,r,t){"use strict";var n=t(35475);t.o(n,"notFound")&&t.d(r,{notFound:function(){return n.notFound}}),t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},52886:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return N}});var n=t(57437),o=t(71245),a=t(99376),i=t(79820),s=t(12381),l=t(2265),c=t(5255),d=t(81475),u=t(12032),f=t(53459),m=t(5485),p=t(93448),v=t(27648),h=t(69174);let b=[{id:"doc1",nombre:"F30-1 de la Direcci\xf3n del Trabajo",estado:"Aprobado"},{id:"doc2",nombre:"Planilla de Cotizaciones Previsionales",estado:"Observado",observacion:"El mes de la planilla es incorrecto. Se requiere la del mes de Octubre 2025."},{id:"doc3",nombre:"Liquidaciones de Sueldo Firmadas",estado:"Pendiente de Carga"},{id:"doc4",nombre:"Certificado de Mutualidad",estado:"En Revisi\xf3n"}],g={CUMPLIENDO:{title:"Cumpliendo - Documentaci\xf3n Aprobada",description:"Felicitaciones, tu estado de pago para este per\xedodo ha sido habilitado.",icon:c.Z,color:"bg-green-100 border-green-300 text-green-800"},EN_REVISION:{title:"En Revisi\xf3n",description:"Hemos recibido tu documentaci\xf3n. Nuestro equipo la est\xe1 revisando.",icon:d.Z,color:"bg-blue-100 border-blue-300 text-blue-800"},ACCION_REQUERIDA:{title:"Acci\xf3n Requerida - Tienes Documentos Observados",description:"Revisa los comentarios y vuelve a subir los documentos correctos para habilitar tu pago.",icon:u.Z,color:"bg-red-100 border-red-300 text-red-800"},PENDIENTE_DE_CARGA:{title:"Pendiente de Carga",description:"Sube los documentos requeridos antes de la fecha de corte para iniciar el proceso.",icon:d.Z,color:"bg-yellow-100 border-yellow-300 text-yellow-800"}},y=()=>b.some(e=>"Observado"===e.estado)?"ACCION_REQUERIDA":b.some(e=>"Pendiente de Carga"===e.estado)?"PENDIENTE_DE_CARGA":b.some(e=>"En Revisi\xf3n"===e.estado)?"EN_REVISION":"CUMPLIENDO",x={Aprobado:{color:"bg-green-100 text-green-800",label:"Aprobado"},"En Revisi\xf3n":{color:"bg-blue-100 text-blue-800",label:"En Revisi\xf3n"},Observado:{color:"bg-red-100 text-red-800",label:"Observado"},"Pendiente de Carga":{color:"bg-gray-100 text-gray-800",label:"Pendiente"}};function N(){let{role:e,loading:r,user:t}=(0,o.a)(),c=(0,a.useRouter)(),[d,u]=(0,l.useState)(y());if((0,l.useEffect)(()=>{r||"contratista"===e||"superadmin"===e||c.replace("/dashboard")},[e,r,c]),r)return(0,n.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,n.jsx)(f.Z,{className:"h-8 w-8 animate-spin"})});if("contratista"!==e&&"superadmin"!==e)return null;let N=g[d],j=N.icon;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("header",{children:[(0,n.jsx)(s.z,{asChild:!0,variant:"outline",size:"sm",className:"mb-4",children:(0,n.jsxs)(v.default,{href:"/dashboard",children:[(0,n.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Volver al Dashboard"]})}),(0,n.jsx)("h1",{className:"text-3xl font-bold",children:"Portal del Contratista"}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["Bienvenido, ",(null==t?void 0:t.displayName)||(null==t?void 0:t.email),"."]})]}),(0,n.jsx)(i.Zb,{className:(0,p.cn)("border-l-4",N.color),children:(0,n.jsxs)(i.Ol,{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)(j,{className:"h-8 w-8"}),(0,n.jsxs)("div",{children:[(0,n.jsx)(i.ll,{className:"text-lg",children:N.title}),(0,n.jsx)(i.SZ,{className:"text-sm",children:N.description})]})]})}),(0,n.jsxs)(i.Zb,{children:[(0,n.jsxs)(i.Ol,{children:[(0,n.jsx)(i.ll,{children:"Requisitos del Per\xedodo: Noviembre 2025"}),(0,n.jsx)(i.SZ,{children:"Sube la documentaci\xf3n requerida para habilitar tu estado de pago. Fecha de corte: 25/11/2025."})]}),(0,n.jsx)(i.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,n.jsx)(i.Zb,{className:"Observado"===e.estado?"border-red-300":"",children:(0,n.jsxs)(i.aY,{className:"p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("p",{className:"font-medium",children:e.nombre}),"Observado"===e.estado&&(0,n.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[(0,n.jsx)("strong",{children:"Observaci\xf3n:"})," ",e.observacion]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 flex-shrink-0",children:[(0,n.jsx)(h.C,{className:x[e.estado].color,children:x[e.estado].label}),"Pendiente de Carga"===e.estado&&(0,n.jsx)(s.z,{size:"sm",children:"Subir Archivo"}),"Observado"===e.estado&&(0,n.jsx)(s.z,{size:"sm",variant:"destructive",children:"Corregir y Volver a Subir"})]})]})},e.id))})})]})]})}},69174:function(e,r,t){"use strict";t.d(r,{C:function(){return s}});var n=t(57437);t(2265);var o=t(90535),a=t(93448);let i=(0,o.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function s(e){let{className:r,variant:t,...o}=e;return(0,n.jsx)("div",{className:(0,a.cn)(i({variant:t}),r),...o})}},12381:function(e,r,t){"use strict";t.d(r,{d:function(){return l},z:function(){return c}});var n=t(57437),o=t(2265),a=t(37053),i=t(90535),s=t(93448);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,n.jsx)(u,{className:(0,s.cn)(l({variant:o,size:i,className:t})),ref:r,...d})});c.displayName="Button"},79820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return s},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var n=t(57437),o=t(2265),a=t(93448);let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...o})});i.displayName="Card";let s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",t),...o})});s.displayName="CardHeader";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",t),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let d=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("p-6 pt-0",t),...o})});d.displayName="CardContent";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,n.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-6 pt-0",t),...o})});u.displayName="CardFooter"},71245:function(e,r,t){"use strict";t.d(r,{H:function(){return f},a:function(){return m}});var n=t(57437),o=t(43301),a=t(2265),i=t(99764),s=t(99376),l=t(5978);async function c(e){var r;let t=i.N$,n=null===(r=e.email)||void 0===r?void 0:r.toLowerCase().trim();if(!n)return{role:"none",companyId:null};let o=(0,l.IO)((0,l.hJ)(t,"invitacionesUsuarios"),(0,l.ar)("email","==",n),(0,l.ar)("estado","==","pendiente_auth"),(0,l.b9)(1)),a=await (0,l.PL)(o);if(a.empty)return console.log("No hay invitaci\xf3n pendiente para ".concat(n,".")),{role:"none",companyId:null};let s=a.docs[0],c=s.data(),d=(0,l.JU)(t,"users",e.uid),u=(0,l.qs)(t);return u.set(d,{nombre:c.nombre||e.displayName,email:n,role:c.roleDeseado,empresaId:c.empresaId,activo:!0,createdAt:(0,l.Bt)(),updatedAt:(0,l.Bt)()},{merge:!0}),u.update(s.ref,{estado:"activado",uid:e.uid,activatedAt:(0,l.Bt)()}),await u.commit(),console.log("Usuario ".concat(n," activado con rol ").concat(c.roleDeseado," en empresa ").concat(c.empresaId,".")),{role:c.roleDeseado,companyId:c.empresaId}}async function d(e){}let u=(0,a.createContext)(void 0);function f(e){let{children:r}=e,[t,f]=(0,a.useState)(null),[m,p]=(0,a.useState)("none"),[v,h]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),[y,x]=(0,a.useState)(!0),N=(0,s.useRouter)(),j=(0,s.usePathname)();async function w(e,r){try{await (0,o.e5)(i.lX,e,r)}catch(e){if("auth/invalid-credential"===e.code||"auth/wrong-password"===e.code||"auth/user-not-found"===e.code)throw Error("Credenciales inv\xe1lidas. Por favor, revisa tu correo y contrase\xf1a.");if("auth/too-many-requests"===e.code)throw Error("Demasiados intentos fallidos. Por seguridad, el acceso desde este dispositivo ha sido bloqueado temporalmente.");throw console.error("Error de login no manejado:",e),Error("Ocurri\xf3 un error inesperado al iniciar sesi\xf3n.")}}async function C(){try{await (0,o.w7)(i.lX),f(null),p("none"),h(null),g(null),N.push("/")}catch(e){console.error("Error al cerrar sesi\xf3n",e)}}return(0,a.useEffect)(()=>{let e=(0,o.Aj)(i.lX,async e=>{if(e){await d(e);let r=(0,l.JU)(i.N$,"users",e.uid),t=await (0,l.QT)(r),n="none",o=null,a=!1;if(t.exists()){let e=t.data();e.role&&void 0!==e.empresaId&&(n=e.role,o=e.empresaId,a=!0===e.mustChangePassword)}if("none"===n){let r=await c(e);n=r.role,o=r.companyId,a=!0}p(n),h(o),f(e);let s="/cambiar-password"===j;if(a&&!s)N.replace("/cambiar-password");else if(!a){if("none"===n)N.replace("/sin-acceso");else if(j.startsWith("/login")||"/"===j||s){let e="cliente"===n?"/cliente":"contratista"===n?"/cumplimiento/contratista":"/dashboard";N.replace(e)}}}else f(null),p("none"),h(null),g(null);x(!1)});return()=>e()},[N,j]),(0,a.useEffect)(()=>{if(v){let e=(0,l.JU)(i.N$,"companies",v),r=(0,o.Aj)(i.lX,r=>{r&&(0,l.QT)(e).then(e=>{e.exists()?g({id:e.id,...e.data()}):g(null)})});return()=>r()}g(null)},[v]),(0,n.jsx)(u.Provider,{value:{user:t,role:m,companyId:v,company:b,loading:y,login:w,logout:C},children:r})}function m(){let e=(0,a.useContext)(u);if(!e)throw Error("useAuth debe usarse dentro de un AuthProvider");return e}},99764:function(e,r,t){"use strict";let n,o,a,i,s;t.d(r,{IG:function(){return i},N$:function(){return a},lX:function(){return o},x2:function(){return s}});var l=t(738),c=t(43301),d=t(5978),u=t(60062),f=t(13491);let m={apiKey:"AIzaSyBfMp_dH9XhFSXEeMxY-Cdy8MDRIgWrxR0",authDomain:"pcg-2-8bf1b.firebaseapp.com",projectId:"pcg-2-8bf1b",storageBucket:"pcg-2-8bf1b.appspot.com",messagingSenderId:"1073834543546",appId:"1:1073834543546:web:2f85a4a8350280f8589737"};for(let e in m)if(Object.prototype.hasOwnProperty.call(m,e)&&!m[e]){let r=e.replace(/([A-Z])/g,"_$1").toUpperCase(),t="NEXT_PUBLIC_FIREBASE_".concat(r);throw Error("Error de configuraci\xf3n del cliente: La variable de entorno Firebase '".concat(t,"' no est\xe1 definida o est\xe1 vac\xeda. ")+"Aseg\xfarate de que est\xe9 configurada en tu archivo .env.local o en las variables de entorno de producci\xf3n.")}n=(0,l.C6)().length?(0,l.Mq)():(0,l.ZF)(m),o=(0,c.v0)(n),a=(0,d.ad)(n),i=(0,u.cF)(n),s=(0,f.$C)(n,"us-central1")},93448:function(e,r,t){"use strict";t.d(r,{cn:function(){return a}});var n=t(61994),o=t(53335);function a(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.m6)((0,n.W)(r))}},98575:function(e,r,t){"use strict";t.d(r,{F:function(){return a},e:function(){return i}});var n=t(2265);function o(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function a(...e){return r=>{let t=!1,n=e.map(e=>{let n=o(e,r);return t||"function"!=typeof n||(t=!0),n});if(t)return()=>{for(let r=0;r<n.length;r++){let t=n[r];"function"==typeof t?t():o(e[r],null)}}}}function i(...e){return n.useCallback(a(...e),e)}},37053:function(e,r,t){"use strict";t.d(r,{Z8:function(){return d},g7:function(){return u}});var n,o=t(2265),a=t(98575),i=t(57437),s=Symbol.for("react.lazy"),l=(n||(n=t.t(o,2)))[" use ".trim().toString()];function c(e){var r;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===s&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r}function d(e){let r=function(e){let r=o.forwardRef((e,r)=>{let{children:t,...n}=e;if(c(t)&&"function"==typeof l&&(t=l(t._payload)),o.isValidElement(t)){var i;let e,s;let l=(i=t,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),c=function(e,r){let t={...r};for(let n in r){let o=e[n],a=r[n];/^on[A-Z]/.test(n)?o&&a?t[n]=(...e)=>{let r=a(...e);return o(...e),r}:o&&(t[n]=o):"style"===n?t[n]={...o,...a}:"className"===n&&(t[n]=[o,a].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==o.Fragment&&(c.ref=r?(0,a.F)(r,l):l),o.cloneElement(t,c)}return o.Children.count(t)>1?o.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=o.forwardRef((e,t)=>{let{children:n,...a}=e;c(n)&&"function"==typeof l&&(n=l(n._payload));let s=o.Children.toArray(n),d=s.find(m);if(d){let e=d.props.children,n=s.map(r=>r!==d?r:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,i.jsx)(r,{...a,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,n):null})}return(0,i.jsx)(r,{...a,ref:t,children:n})});return t.displayName=`${e}.Slot`,t}var u=d("Slot"),f=Symbol("radix.slottable");function m(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},90535:function(e,r,t){"use strict";t.d(r,{j:function(){return i}});var n=t(61994);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=n.W,i=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return a(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:s}=r,l=Object.keys(i).map(e=>{let r=null==t?void 0:t[e],n=null==s?void 0:s[e];if(null===r)return null;let a=o(r)||o(n);return i[e][a]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return a(e,l,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...o}=r;return Object.entries(o).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...s,...c}[r]):({...s,...c})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},96471:function(e,r,t){"use strict";t.d(r,{Z:function(){return l}});var n=t(2265);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,n.forwardRef)((e,r)=>{let{color:t="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...f}=e;return(0,n.createElement)("svg",{ref:r,...i,width:o,height:o,stroke:t,strokeWidth:l?24*Number(s)/Number(o):s,className:a("lucide",c),...f},[...u.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(d)?d:[d]])}),l=(e,r)=>{let t=(0,n.forwardRef)((t,i)=>{let{className:l,...c}=t;return(0,n.createElement)(s,{ref:i,iconNode:r,className:a("lucide-".concat(o(e)),l),...c})});return t.displayName="".concat(e),t}},5485:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5255:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},81475:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},53459:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},12032:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(96471).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[4358,9990,6137,1211,2972,2971,2117,1744],function(){return e(e.s=49092)}),_N_E=e.O()}]);